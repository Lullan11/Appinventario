<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventario - Kardex</title>
    <link href="../../dist/output.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }

        .kardex-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            outline: none;
            transition: all 0.2s;
        }

        .kardex-input:focus {
            border-color: transparent;
            box-shadow: 0 0 0 2px #639A33;
        }

        .tabla-container {
            max-height: 600px;
            overflow-y: auto;
        }

        .stock-bajo {
            background-color: #fef2f2;
        }

        .modal {
            display: none;
        }

        .modal.active {
            display: flex;
        }

        /* ESTILOS SIMPLIFICADOS PARA PESTA√ëAS */
        .tab-button {
            padding: 1rem 0.25rem;
            border-bottom-width: 2px;
            font-weight: 500;
            font-size: 0.875rem;
            transition: color 0.2s;
            cursor: pointer;
        }

        .tab-button.active {
            border-color: #639A33;
            color: #639A33;
        }

        .tab-button.inactive {
            border-color: transparent;
            color: #6b7280;
        }

        .tab-button.inactive:hover {
            color: #374151;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ESTILOS MEJORADOS PARA BOTONES */
        .btn-primary {
            background: linear-gradient(to right, #639A33, #4a7c27);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary:hover {
            background: linear-gradient(to right, #4a7c27, #3a651f);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(to right, #6b7280, #4b5563);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-secondary:hover {
            background: linear-gradient(to right, #4b5563, #374151);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-success {
            background: linear-gradient(to right, #10b981, #059669);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-success:hover {
            background: linear-gradient(to right, #059669, #047857);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(to right, #ef4444, #dc2626);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-danger:hover {
            background: linear-gradient(to right, #dc2626, #b91c1c);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-warning {
            background: linear-gradient(to right, #f59e0b, #d97706);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-warning:hover {
            background: linear-gradient(to right, #d97706, #b45309);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-info {
            background: linear-gradient(to right, #3b82f6, #2563eb);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-info:hover {
            background: linear-gradient(to right, #2563eb, #1d4ed8);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .btn-export {
            background: linear-gradient(to right, #8b5cf6, #7c3aed);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-export:hover {
            background: linear-gradient(to right, #7c3aed, #6d28d9);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        /* Botones peque√±os para acciones en tabla */
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-warning-sm {
            background-color: #f59e0b;
            color: white;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .btn-warning-sm:hover {
            background-color: #d97706;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .btn-danger-sm {
            background-color: #ef4444;
            color: white;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .btn-danger-sm:hover {
            background-color: #dc2626;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .badge-success {
            background-color: #dcfce7;
            color: #166534;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-danger {
            background-color: #fee2e2;
            color: #991b1b;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #1e40af;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Estilos para filtros */
        .filtros-container {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .filtros-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        @media (min-width: 768px) {
            .filtros-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .filtros-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Estilos para mensajes */
        .mensaje-toast {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            font-weight: 500;
            z-index: 50;
            transition: all 0.3s;
        }

        .loading {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .filtro-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
            font-size: 0.875rem;
        }

        .campo-contenedor {
            margin-bottom: 1rem;
        }
    </style>
</head>

<body class="bg-white text-[#0F172A] min-h-screen flex">
    <div class="flex flex-1 h-screen overflow-hidden">

        <!-- Sidebar -->
        <aside class="w-64 bg-[#0F172A] text-white p-6 flex flex-col justify-between">
            <div>
                <div class="flex items-center gap-2 mb-6">
                    <div class="bg-[#639A33] p-2 rounded-md">
                        <i class="fas fa-boxes-stacked text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="sidebar-title font-bold text-[#639A33]">Inventario IPS</h1>
                        <p class="sidebar-subtitle text-white/70">Sistema de gesti√≥n</p>
                    </div>
                </div>
                <nav class="space-y-2">
                    <a href="#" data-view="dashboard.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-home"></i> Inicio
                    </a>
                    <a href="#" data-view="sedes.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-building"></i> Sedes
                    </a>
                    <a href="#" data-view="areas.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-map-marker-alt"></i> √Åreas
                    </a>
                    <a href="#" data-view="puestos.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-briefcase"></i> Puestos de trabajo
                    </a>
                    <a href="#" data-view="equipos.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-laptop"></i> Equipos
                    </a>
                    <a href="#" data-view="chequeos.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-history"></i> Chequeos diarios
                    </a>
                    <a href="#" data-view="excel.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-file-excel"></i> Excel
                    </a>
                    <a href="#" data-view="inactivos.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-ban"></i> Inactivos
                    </a>
                    <a href="#" data-view="usuarios.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-users"></i> Usuarios
                    </a>
                    <a href="#" data-view="insumos.html"
                        class="view-link block py-2 px-3 rounded bg-[#639A33] text-[#0F172A] font-semibold text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-boxes"></i> Insumos
                    </a>
                    <a href="#" data-view="cronograma.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-boxes"></i> Cronograma
                    </a>
                    <a href="#" data-view="temperatura.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-boxes"></i> Temperatura
                    </a>
                    <a href="#" data-view="entrada_salida.html"
                        class="view-link block py-2 px-3 rounded hover:bg-[#639A33] hover:text-[#0F172A] text-sm md:text-xs flex items-center gap-2">
                        <i class="fas fa-boxes"></i> Entrada y salidas
                    </a>
                </nav>
            </div>
            <div class="text-sm mt-6">
                <p class="mb-2 text-gray-300"><i class="fas fa-user text-white"></i> Usuario:
                    <span id="user-role" class="text-[#639A33] font-semibold">...</span>
                </p>
                <button onclick="logout()"
                    class="w-full bg-[#639A33] text-[#0F172A] font-semibold py-2 px-4 rounded hover:bg-green-100 transition-colors">
                    <i class="fas fa-sign-out-alt"></i>
                    Cerrar Sesi√≥n
                </button>
            </div>
        </aside>

        <!-- Contenido principal -->
        <main class="flex-1 p-8 overflow-y-auto bg-white">
            <header class="mb-6 flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-semibold text-[#0F172A]">Sistema Kardex</h1>
                    <p class="text-gray-600">Gesti√≥n de inventario por sedes</p>
                </div>
                <div class="flex items-center gap-4">
                    <img src="../assets/logo_ips.png" alt="Logo IPS" class="h-20 w-20 object-contain" />
                    <img src="../assets/logo_coop.png" alt="Logo Cooperativa" class="h-20 w-20 object-contain" />
                </div>
            </header>

            <!-- SELECTOR DE SEDE PRINCIPAL -->
            <section class="bg-white border-2 border-[#0F172A] p-6 rounded-xl shadow-md mb-6">
                <h2 class="text-xl font-semibold text-[#0F172A] mb-4">üè¢ Sede Activa</h2>
                <div class="flex items-center gap-4">
                    <select id="sede-principal" class="kardex-input w-80">
                        <option value="">Seleccione una sede para trabajar</option>
                    </select>
                    <div id="info-sede" class="text-sm text-gray-600 hidden">
                        <span id="sede-seleccionada" class="font-semibold"></span>
                    </div>
                </div>
            </section>

            <!-- PANEL PRINCIPAL (se muestra solo cuando hay sede seleccionada) -->
            <div id="panel-principal" class="hidden">

                <!-- RESUMEN DE STOCK MEJORADO -->
                <section class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg">
                        <div class="flex items-center">
                            <div class="bg-blue-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-boxes text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-blue-600 font-medium">Productos con Stock</p>
                                <p id="total-productos-count" class="text-2xl font-bold text-blue-800">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                        <div class="flex items-center">
                            <div class="bg-green-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-arrow-down text-green-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-green-600 font-medium">Stock Total</p>
                                <p id="total-stock-count" class="text-2xl font-bold text-green-800">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
                        <div class="flex items-center">
                            <div class="bg-yellow-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-exclamation-triangle text-yellow-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-yellow-600 font-medium">Stock Bajo</p>
                                <p id="stock-bajo-count" class="text-2xl font-bold text-yellow-800">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-purple-50 border border-purple-200 p-4 rounded-lg">
                        <div class="flex items-center">
                            <div class="bg-purple-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-exchange-alt text-purple-600 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-sm text-purple-600 font-medium">Movimientos</p>
                                <p id="total-movimientos" class="text-2xl font-bold text-purple-800">0</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PESTA√ëAS SIMPLIFICADAS -->
                <div class="mb-6 border-b border-gray-200">
                    <nav class="flex space-x-8">
                        <button id="tab-movimientos" class="tab-button active">
                            <i class="fas fa-exchange-alt mr-2"></i>Registrar Movimientos
                        </button>
                        <button id="tab-productos" class="tab-button inactive">
                            <i class="fas fa-boxes mr-2"></i>Gesti√≥n de Productos
                        </button>
                        <button id="tab-proveedores" class="tab-button inactive">
                            <i class="fas fa-truck mr-2"></i>Gesti√≥n de Proveedores
                        </button>
                    </nav>
                </div>

                <!-- CONTENIDO DE PESTA√ëAS -->
                <div id="contenido-pestanas">
                    <!-- PESTA√ëA: REGISTRAR MOVIMIENTOS -->
                    <div id="contenido-movimientos" class="tab-content active">
                        <section class="bg-white border-2 border-[#0F172A] p-6 rounded-xl shadow-md mb-6">
                            <h2 class="text-xl font-semibold text-[#0F172A] mb-4">üìù Registrar Movimiento</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üìÖ Fecha del movimiento</label>
                                    <input id="fecha" type="date" class="kardex-input" value="">
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üì¶ Producto</label>
                                    <select id="producto" class="kardex-input">
                                        <option value="">Seleccionar producto</option>
                                    </select>
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üîÑ Tipo de movimiento</label>
                                    <select id="tipo" class="kardex-input">
                                        <option value="">Tipo de movimiento</option>
                                        <option value="ENTRADA">Entrada</option>
                                        <option value="SALIDA">Salida</option>
                                    </select>
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üìù Descripci√≥n</label>
                                    <input id="descripcion" type="text" class="kardex-input"
                                        placeholder="Descripci√≥n del movimiento">
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üìç Ubicaci√≥n</label>
                                    <input id="ubicacion" type="text" class="kardex-input"
                                        placeholder="Ubicaci√≥n espec√≠fica">
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üî¢ Cantidad</label>
                                    <div class="flex gap-2">
                                        <input id="cantidad" type="number" class="kardex-input flex-1"
                                            placeholder="Cantidad" min="1">
                                        <span id="unidad-producto"
                                            class="bg-gray-100 px-3 py-2 rounded border border-gray-300 min-w-20 text-center">UNIDAD</span>
                                    </div>
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üí∞ Costo unitario</label>
                                    <input id="costo" type="number" class="kardex-input" placeholder="Costo unitario"
                                        step="0.01" min="0">
                                </div>
                                <div class="campo-contenedor">
                                    <label class="filtro-label">üìÖ Fecha de vencimiento</label>
                                    <input id="fecha-vencimiento" type="date" class="kardex-input">
                                </div>
                                <div class="lg:col-span-2 campo-contenedor">
                                    <div id="info-stock" class="text-sm p-3 bg-gray-50 rounded border hidden">
                                        <span class="font-semibold">Stock actual: </span>
                                        <span id="stock-actual">0</span>
                                        <span id="alerta-stock" class="ml-2 hidden text-red-600 font-semibold"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button id="btnRegistrar" class="btn-primary">
                                    <i class="fas fa-save mr-2"></i>Registrar Movimiento
                                </button>
                                <button id="btnLimpiarForm" class="btn-secondary">
                                    <i class="fas fa-eraser mr-2"></i>Limpiar
                                </button>
                                <button id="btnNuevoProducto" class="btn-success">
                                    <i class="fas fa-plus mr-2"></i>Nuevo Producto
                                </button>
                            </div>
                        </section>

                        <!-- MOVIMIENTOS RECIENTES CON FILTROS -->
                        <section class="bg-white border-2 border-[#0F172A] p-6 rounded-xl shadow-md">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-[#0F172A]">üïê Movimientos Recientes</h2>
                                <button id="btnExportarMovimientos" class="btn-export">
                                    <i class="fas fa-file-excel mr-2"></i>Exportar Excel
                                </button>
                            </div>

                            <!-- FILTROS PARA MOVIMIENTOS - CORREGIDOS (SOLO 2 FECHAS) -->
                            <div class="filtros-container mb-4">
                                <h3 class="text-lg font-semibold text-gray-700 mb-3">üîç Filtros de B√∫squeda</h3>
                                <div class="filtros-grid">
                                    <div>
                                        <label class="filtro-label">üì¶ Producto</label>
                                        <select id="filtro-producto-mov" class="kardex-input">
                                            <option value="">Todos los productos</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="filtro-label">üîÑ Tipo de movimiento</label>
                                        <select id="filtro-tipo-mov" class="kardex-input">
                                            <option value="">Todos los movimientos</option>
                                            <option value="ENTRADA">Entrada</option>
                                            <option value="SALIDA">Salida</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="filtro-label">üìÖ Fecha inicio</label>
                                        <input id="filtro-fecha-inicio" type="date" class="kardex-input">
                                    </div>
                                    <div>
                                        <label class="filtro-label">üìÖ Fecha fin</label>
                                        <input id="filtro-fecha-fin" type="date" class="kardex-input">
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-3">
                                    <button id="btnAplicarFiltrosMov" class="btn-success">
                                        <i class="fas fa-search mr-2"></i>Aplicar Filtros
                                    </button>
                                    <button id="btnLimpiarFiltrosMov" class="btn-secondary">
                                        <i class="fas fa-eraser mr-2"></i>Limpiar Filtros
                                    </button>
                                </div>
                            </div>

                            <div class="tabla-container">
                                <table id="tabla-movimientos-recientes"
                                    class="min-w-full text-left border border-[#0F172A]">
                                    <thead class="bg-[#0F172A] text-white sticky top-0">
                                        <tr>
                                            <th class="px-4 py-2 border">Fecha</th>
                                            <th class="px-4 py-2 border">Hora</th>
                                            <th class="px-4 py-2 border">Producto</th>
                                            <th class="px-4 py-2 border">Movimiento</th>
                                            <th class="px-4 py-2 border">Descripci√≥n</th>
                                            <th class="px-4 py-2 border">Ubicaci√≥n</th>
                                            <th class="px-4 py-2 border">Cantidad</th>
                                            <th class="px-4 py-2 border">Stock</th>
                                            <th class="px-4 py-2 border">Vencimiento</th>
                                            <th class="px-4 py-2 border">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="10" class="px-4 py-4 text-center text-gray-500">
                                                Seleccione una sede para ver los movimientos
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </div>

                    <!-- PESTA√ëA: GESTI√ìN DE PRODUCTOS -->
                    <div id="contenido-productos" class="tab-content">
                        <section class="bg-white border-2 border-[#0F172A] p-6 rounded-xl shadow-md mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-[#0F172A]">üì¶ Gesti√≥n de Productos</h2>
                                <div class="flex gap-2">
                                    <button id="btnNuevoProducto2" class="btn-primary">
                                        <i class="fas fa-plus mr-2"></i>Nuevo Producto
                                    </button>
                                    <button id="btnExportarProductos" class="btn-export">
                                        <i class="fas fa-file-excel mr-2"></i>Exportar Excel
                                    </button>
                                </div>
                            </div>

                            <!-- FILTROS PARA PRODUCTOS - CORREGIDOS -->
                            <div class="filtros-container mb-4">
                                <h3 class="text-lg font-semibold text-gray-700 mb-3">üîç Filtros de B√∫squeda</h3>
                                <div class="filtros-grid">
                                    <div>
                                        <label class="filtro-label">üîç Nombre del producto</label>
                                        <input id="filtro-nombre-producto" type="text" class="kardex-input"
                                            placeholder="Buscar por nombre">
                                    </div>
                                    <div>
                                        <label class="filtro-label">üìÅ Categor√≠a</label>
                                        <input id="filtro-categoria-producto" type="text" class="kardex-input"
                                            placeholder="Buscar por categor√≠a">
                                    </div>
                                    <div>
                                        <label class="filtro-label">üìä Estado de stock</label>
                                        <select id="filtro-stock-producto" class="kardex-input">
                                            <option value="">Todos los estados</option>
                                            <option value="bajo">Stock Bajo (< 10)</option>
                                            <option value="normal">Stock Normal</option>
                                            <option value="sin-stock">Sin Stock</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="filtro-label">üìè Unidad de medida</label>
                                        <select id="filtro-unidad-producto" class="kardex-input">
                                            <option value="">Todas las unidades</option>
                                            <option value="UNIDAD">UNIDAD</option>
                                            <option value="CAJA">CAJA</option>
                                            <option value="PAQUETE">PAQUETE</option>
                                            <option value="LITRO">LITRO</option>
                                            <option value="KILO">KILO</option>
                                            <option value="METRO">METRO</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="filtro-label">üè¢ Proveedor</label>
                                        <select id="filtro-proveedor-producto" class="kardex-input">
                                            <option value="">Todos los proveedores</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-3">
                                    <button id="btnAplicarFiltrosProd" class="btn-success">
                                        <i class="fas fa-search mr-2"></i>Aplicar Filtros
                                    </button>
                                    <button id="btnLimpiarFiltrosProd" class="btn-secondary">
                                        <i class="fas fa-eraser mr-2"></i>Limpiar Filtros
                                    </button>
                                </div>
                            </div>

                            <!-- Lista de productos con acciones - CORREGIDA (AGREGADO REGISTRO INVIMA) -->
                            <div class="tabla-container">
                                <table id="tabla-productos" class="min-w-full text-left border border-[#0F172A]">
                                    <thead class="bg-[#0F172A] text-white sticky top-0">
                                        <tr>
                                            <th class="px-4 py-2 border">Producto</th>
                                            <th class="px-4 py-2 border">Categor√≠a</th>
                                            <th class="px-4 py-2 border">Unidad</th>
                                            <th class="px-4 py-2 border">Proveedor</th>
                                            <th class="px-4 py-2 border">Stock Total</th>
                                            <th class="px-4 py-2 border">Registro Invima</th>
                                            <th class="px-4 py-2 border">Movimientos</th>
                                            <th class="px-4 py-2 border">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="8" class="px-4 py-4 text-center text-gray-500">
                                                Cargando productos...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </div>

                    <!-- PESTA√ëA: GESTI√ìN DE PROVEEDORES -->
                    <div id="contenido-proveedores" class="tab-content">
                        <section class="bg-white border-2 border-[#0F172A] p-6 rounded-xl shadow-md mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-[#0F172A]">üè¢ Gesti√≥n de Proveedores</h2>
                                <div class="flex gap-2">
                                    <button id="btnNuevoProveedor" class="btn-primary">
                                        <i class="fas fa-plus mr-2"></i>Nuevo Proveedor
                                    </button>
                                    <button id="btnExportarProveedores" class="btn-export">
                                        <i class="fas fa-file-excel mr-2"></i>Exportar Excel
                                    </button>
                                </div>
                            </div>

                            <!-- FILTROS PARA PROVEEDORES -->
                            <div class="filtros-container mb-4">
                                <h3 class="text-lg font-semibold text-gray-700 mb-3">üîç Filtros de B√∫squeda</h3>
                                <div class="filtros-grid">
                                    <div>
                                        <label class="filtro-label">üè¢ Raz√≥n Social</label>
                                        <input id="filtro-razon-social" type="text" class="kardex-input"
                                            placeholder="Buscar por raz√≥n social">
                                    </div>
                                    <div>
                                        <label class="filtro-label">üî¢ NIT</label>
                                        <input id="filtro-nit" type="text" class="kardex-input"
                                            placeholder="Buscar por NIT">
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-3">
                                    <button id="btnAplicarFiltrosProv" class="btn-success">
                                        <i class="fas fa-search mr-2"></i>Aplicar Filtros
                                    </button>
                                    <button id="btnLimpiarFiltrosProv" class="btn-secondary">
                                        <i class="fas fa-eraser mr-2"></i>Limpiar Filtros
                                    </button>
                                </div>
                            </div>

                            <!-- Tabla de proveedores -->
                            <!-- Tabla de proveedores -->
                            <div class="tabla-container">
                                <table id="tabla-proveedores" class="min-w-full text-left border border-[#0F172A]">
                                    <thead class="bg-[#0F172A] text-white sticky top-0">
                                        <tr>
                                            <th class="px-4 py-2 border">Raz√≥n Social</th>
                                            <th class="px-4 py-2 border">NIT</th>
                                            <th class="px-4 py-2 border">Correo</th>
                                            <th class="px-4 py-2 border">Tel√©fono</th>
                                            <th class="px-4 py-2 border">Direcci√≥n</th>
                                            <th class="px-4 py-2 border">Productos</th>
                                            <th class="px-4 py-2 border">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="7" class="px-4 py-4 text-center text-gray-500">
                                                Cargando proveedores...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </div>
                </div>
            </div>

            <!-- MODAL NUEVO PRODUCTO -->
            <div id="modalProducto"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4">‚ûï Nuevo Producto</h3>
                    <form id="formProducto" class="space-y-4">
                        <input type="text" id="producto-nombre" class="kardex-input" placeholder="Nombre del producto"
                            required>
                        <input type="text" id="producto-descripcion" class="kardex-input" placeholder="Descripci√≥n">
                        <input type="text" id="producto-categoria" class="kardex-input" placeholder="Categor√≠a">
                        <select id="producto-unidad" class="kardex-input" required>
                            <option value="">Seleccionar unidad</option>
                            <option value="UNIDAD">UNIDAD</option>
                            <option value="CAJA">CAJA</option>
                            <option value="PAQUETE">PAQUETE</option>
                            <option value="LITRO">LITRO</option>
                            <option value="KILO">KILO</option>
                            <option value="METRO">METRO</option>
                        </select>
                        <select id="producto-proveedor" class="kardex-input">
                            <option value="">Seleccionar proveedor</option>
                        </select>
                        <input type="text" id="producto-invima" class="kardex-input" placeholder="Registro Invima">
                        <div class="flex gap-2 pt-4">
                            <button type="submit" class="btn-primary flex-1">
                                <i class="fas fa-save mr-2"></i>Guardar
                            </button>
                            <button type="button" id="btnCerrarModal" class="btn-secondary">
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- MODAL EDITAR PRODUCTO -->
            <div id="modalEditarProducto"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4">‚úèÔ∏è Editar Producto</h3>
                    <form id="formEditarProducto" class="space-y-4">
                        <input type="hidden" id="editar-producto-id">
                        <input type="text" id="editar-producto-nombre" class="kardex-input"
                            placeholder="Nombre del producto" required>
                        <input type="text" id="editar-producto-descripcion" class="kardex-input"
                            placeholder="Descripci√≥n">
                        <input type="text" id="editar-producto-categoria" class="kardex-input" placeholder="Categor√≠a">
                        <select id="editar-producto-unidad" class="kardex-input" required>
                            <option value="">Seleccionar unidad</option>
                            <option value="UNIDAD">UNIDAD</option>
                            <option value="CAJA">CAJA</option>
                            <option value="PAQUETE">PAQUETE</option>
                            <option value="LITRO">LITRO</option>
                            <option value="KILO">KILO</option>
                            <option value="METRO">METRO</option>
                        </select>
                        <select id="editar-producto-proveedor" class="kardex-input">
                            <option value="">Seleccionar proveedor</option>
                        </select>
                        <input type="text" id="editar-producto-invima" class="kardex-input"
                            placeholder="Registro Invima">
                        <div class="flex gap-2 pt-4">
                            <button type="submit" class="btn-primary flex-1">
                                <i class="fas fa-save mr-2"></i>Actualizar
                            </button>
                            <button type="button" id="btnCerrarModalEditar" class="btn-secondary">
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>


            <!-- MODAL NUEVO PROVEEDOR -->
            <div id="modalProveedor"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4">‚ûï Nuevo Proveedor</h3>
                    <form id="formProveedor" class="space-y-4">
                        <input type="text" id="proveedor-razon-social" class="kardex-input" placeholder="Raz√≥n Social"
                            required>
                        <input type="text" id="proveedor-nit" class="kardex-input" placeholder="NIT" required>
                        <input type="email" id="proveedor-correo" class="kardex-input" placeholder="Correo electr√≥nico">
                        <!-- AGREGAR CAMPOS NUEVOS -->
                        <input type="text" id="proveedor-telefono" class="kardex-input" placeholder="Tel√©fono">
                        <input type="text" id="proveedor-direccion" class="kardex-input" placeholder="Direcci√≥n">
                        <div class="flex gap-2 pt-4">
                            <button type="submit" class="btn-primary flex-1">
                                <i class="fas fa-save mr-2"></i>Guardar
                            </button>
                            <button type="button" id="btnCerrarModalProveedor" class="btn-secondary">
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- MODAL EDITAR PROVEEDOR -->
            <div id="modalEditarProveedor"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4">‚úèÔ∏è Editar Proveedor</h3>
                    <form id="formEditarProveedor" class="space-y-4">
                        <input type="hidden" id="editar-proveedor-id">
                        <input type="text" id="editar-proveedor-razon-social" class="kardex-input"
                            placeholder="Raz√≥n Social" required>
                        <input type="text" id="editar-proveedor-nit" class="kardex-input" placeholder="NIT" required>
                        <input type="email" id="editar-proveedor-correo" class="kardex-input"
                            placeholder="Correo electr√≥nico">
                        <!-- AGREGAR CAMPOS NUEVOS -->
                        <input type="text" id="editar-proveedor-telefono" class="kardex-input" placeholder="Tel√©fono">
                        <input type="text" id="editar-proveedor-direccion" class="kardex-input" placeholder="Direcci√≥n">
                        <div class="flex gap-2 pt-4">
                            <button type="submit" class="btn-primary flex-1">
                                <i class="fas fa-save mr-2"></i>Actualizar
                            </button>
                            <button type="button" id="btnCerrarModalEditarProveedor" class="btn-secondary">
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- MODAL CONFIRMAR ELIMINACI√ìN PRODUCTO -->
            <div id="modalConfirmarEliminar"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4 text-red-600">üóëÔ∏è Eliminar Producto</h3>
                    <p class="text-gray-600 mb-4" id="mensaje-confirmacion">¬øEst√° seguro de que desea eliminar este
                        producto?</p>
                    <div class="flex gap-2 pt-4">
                        <button type="button" id="btnConfirmarEliminar" class="btn-danger flex-1">
                            <i class="fas fa-trash mr-2"></i>Eliminar
                        </button>
                        <button type="button" id="btnCancelarEliminar" class="btn-secondary">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <!-- MODAL CONFIRMAR ELIMINACI√ìN PROVEEDOR -->
            <div id="modalConfirmarEliminarProveedor"
                class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-md">
                    <h3 class="text-xl font-semibold mb-4 text-red-600">üóëÔ∏è Eliminar Proveedor</h3>
                    <p class="text-gray-600 mb-4" id="mensaje-confirmacion-proveedor">¬øEst√° seguro de que desea eliminar
                        este
                        proveedor?</p>
                    <div class="flex gap-2 pt-4">
                        <button type="button" id="btnConfirmarEliminarProveedor" class="btn-danger flex-1">
                            <i class="fas fa-trash mr-2"></i>Eliminar
                        </button>
                        <button type="button" id="btnCancelarEliminarProveedor" class="btn-secondary">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <footer class="text-center mt-6 py-4 border-t border-gray-200">
                <p class="text-sm text-[#0F172A] font-medium">Sistema Kardex - Gesti√≥n de Inventario por Sede</p>
            </footer>
        </main>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/navegacion.js"></script>
    <script src="../js/kardex.js"></script>
</body>

</html>